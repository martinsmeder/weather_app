(()=>{"use strict";var e={467:(e,t,n)=>{n.d(t,{B9:()=>o,QE:()=>r,cQ:()=>a}),console.log("this seem to be working (appLogic.js)");const r={getWeatherByLocation:async e=>{const t=`https://api.weatherapi.com/v1/current.json?key=ce6acc34934c47f3916181423232305&q=${e}`;try{const e=await fetch(t,{mode:"cors"});if(e.ok){const t=await e.json(),n=await(e=>({city:e.location.name,localTime:e.location.localtime,weatherIcon:e.current.condition.icon,weather:e.current.condition.text,temperatureC:e.current.temp_c,temperatureF:e.current.temp_f,feelsLikeC:e.current.feelslike_c,feelsLikeF:e.current.feelslike_f,humidity:e.current.humidity,windSpeed:e.current.wind_kph,windDirection:e.current.wind_dir,visibility:e.current.vis_km,isDay:1===e.current.is_day}))(t);return n}throw new Error("Unable to fetch weather data.")}catch(e){throw console.error("An error occurred:",e.message),e}}},o={getGifById:async e=>{const t=`https://api.giphy.com/v1/gifs/${e}?api_key=8ewGe5vteIERFUPE6ZbcFuqh7mCIUIzY`;try{const e=await fetch(t,{mode:"cors"});if(e.ok){return(await e.json()).data.images.original.url}throw new Error("Unable to fetch GIF data.")}catch(e){throw console.error("An error occurred:",e.message),e}}},a={switchBackground:e=>{const{isDay:t,weather:n}=e;let r;return r=t?n.toLowerCase().includes("sun")?"images/sunny_day.jpg":n.toLowerCase().includes("cloud")?"images/cloudy_day.jpg":n.toLowerCase().includes("rain")?"images/rainy_day.jpg":n.toLowerCase().includes("snow")?"images/snowy_day.jpg":n.toLowerCase().includes("fog")?"images/foggy_day.jpg":"images/default_day.jpg":n.toLowerCase().includes("clear")?"images/clear_night.jpg":n.toLowerCase().includes("cloud")?"images/cloudy_night.jpg":n.toLowerCase().includes("rain")?"images/rainy_night.jpg":n.toLowerCase().includes("snow")?"images/snowy_night.jpg":n.toLowerCase().includes("fog")?"images/foggy_night.jpg":"images/default_night.jpg",r},setGifId:e=>{const{isDay:t,weather:n}=e;let r;return r=t?n.toLowerCase().includes("sun")?"3cB7aOM6347PW":n.toLowerCase().includes("cloud")?"l0HlQdk8kI9KIOjBe":n.toLowerCase().includes("rain")?"0opZPb9yugNFEd3kFQ":n.toLowerCase().includes("snow")?"9jvjuSSkMOYTyQfJji":n.toLowerCase().includes("fog")?"4CNT8NqboKa2UGpzhW":"fGs29ohKkNKwV4xxKW":"dYGCU6itccVJbdyyeb",r}}},24:(e,t,n)=>{var r=n(467);console.log("this seem to be working (interface.js)");const o=(()=>{const e=document.querySelector("#dataContainer"),t=document.querySelector("#weatherGif");return{renderData:(t,n,r)=>{if(!t)return;const{city:o,localTime:a,weatherIcon:c,weather:i,temperatureC:s,temperatureF:d,feelsLikeC:l,feelsLikeF:u,humidity:m,windSpeed:p,windDirection:g,visibility:h}=t;for(;e.firstChild;)e.firstChild.remove();const w=document.createElement("h2");w.textContent=o,e.appendChild(w);const y=document.createElement("p"),C=a.split(" ")[1];y.textContent=C,e.appendChild(y);const f=document.createElement("img");f.src=c,f.alt=i,e.appendChild(f);const k=document.createElement("p");k.textContent=`Weather: ${i}`,e.appendChild(k);const L=document.createElement("p"),j=n?s:d;L.textContent=`Temperature: ${j}°${n?"C":"F"}`,e.appendChild(L);const E=document.createElement("p"),v=r?l:u;E.textContent=`Feels Like: ${v}°${n?"C":"F"}`,e.appendChild(E);const _=document.createElement("p");_.textContent=`Humidity: ${m}%`,e.appendChild(_);const b=document.createElement("p");b.textContent=`Wind Speed: ${p} km/h`,e.appendChild(b);const x=document.createElement("p");x.textContent=`Wind Direction: ${g}`,e.appendChild(x);const B=document.createElement("p");B.textContent=`Visibility: ${h} km`,e.appendChild(B)},setGif:async e=>{const n=await r.cQ.setGifId(e),o=await r.B9.getGifById(n);t.src=o}}})();(()=>{const e=document.querySelector("#searchLocation"),t=document.querySelector("#searchBtn"),n=document.querySelector("#toggleBtn");let a=null,c=!0,i=!0;const s=async t=>{t.preventDefault();const n=e.value;try{a=await r.QE.getWeatherByLocation(n),o.renderData(a,c,i);const e=r.cQ.switchBackground(a);document.body.style.backgroundImage=`url(${e})`,await o.setGif(a)}catch(e){console.error("Error occurred during weather retrieval:",e)}},d=()=>{c=!c,i=!i,o.renderData(a,c,i),n.textContent=c?"Celsius":"Fahrenheit"};return{init:()=>{t.addEventListener("click",s),e.addEventListener("keydown",(e=>{13===e.keyCode&&s(e)})),n.addEventListener("click",d),(async()=>{try{a=await r.QE.getWeatherByLocation("new york"),o.renderData(a,c,i);const e=r.cQ.switchBackground(a);document.body.style.backgroundImage=`url(${e})`,await o.setGif(a)}catch(e){console.error("Error occurred during weather retrieval:",e)}})()}}})().init()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(467),n(24)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNEVBQUFBLFFBQVFDLElBQUkseUNBRUwsTUFBTUMsRUF3Q0osQ0FDTEMscUJBcEIyQkMsTUFBT0MsSUFDbEMsTUFDTUMsRUFBTSxvRkFBOERELElBRTFFLElBQ0UsTUFBTUUsUUFBaUJDLE1BQU1GLEVBQUssQ0FBRUcsS0FBTSxTQUMxQyxHQUFLRixFQUFTRyxHQUVQLENBQ0wsTUFBTUMsUUFBYUosRUFBU0ssT0FDdEJDLE9BOUJRLENBQUNGLElBQ0csQ0FFcEJHLEtBQU1ILEVBQUtOLFNBQVNVLEtBQ3BCQyxVQUFXTCxFQUFLTixTQUFTWSxVQUN6QkMsWUFBYVAsRUFBS1EsUUFBUUMsVUFBVUMsS0FDcENDLFFBQVNYLEVBQUtRLFFBQVFDLFVBQVVHLEtBQ2hDQyxhQUFjYixFQUFLUSxRQUFRTSxPQUMzQkMsYUFBY2YsRUFBS1EsUUFBUVEsT0FDM0JDLFdBQVlqQixFQUFLUSxRQUFRVSxZQUN6QkMsV0FBWW5CLEVBQUtRLFFBQVFZLFlBQ3pCQyxTQUFVckIsRUFBS1EsUUFBUWEsU0FDdkJDLFVBQVd0QixFQUFLUSxRQUFRZSxTQUN4QkMsY0FBZXhCLEVBQUtRLFFBQVFpQixTQUM1QkMsV0FBWTFCLEVBQUtRLFFBQVFtQixPQUN6QkMsTUFBK0IsSUFBeEI1QixFQUFLUSxRQUFRcUIsU0FlTUMsQ0FBWTlCLEdBQ3BDLE9BQU9FLENBQ1QsQ0FMRSxNQUFNLElBQUk2QixNQUFNLGdDQU1wQixDQUFFLE1BQU9DLEdBRVAsTUFEQTNDLFFBQVEyQyxNQUFNLHFCQUFzQkEsRUFBTUMsU0FDcENELENBQ1IsSUFRU0UsRUF3QkosQ0FDTEMsV0FuQmlCMUMsTUFBTzJDLElBQ3hCLE1BQ016QyxFQUFNLGlDQUFpQ3lDLDZDQUU3QyxJQUNFLE1BQU14QyxRQUFpQkMsTUFBTUYsRUFBSyxDQUFFRyxLQUFNLFNBQzFDLEdBQUtGLEVBQVNHLEdBRVAsQ0FHTCxhQUZtQkgsRUFBU0ssUUFiWkQsS0FBS3FDLE9BQU9DLFNBQVMzQyxHQWdCdkMsQ0FMRSxNQUFNLElBQUlvQyxNQUFNLDRCQU1wQixDQUFFLE1BQU9DLEdBRVAsTUFEQTNDLFFBQVEyQyxNQUFNLHFCQUFzQkEsRUFBTUMsU0FDcENELENBQ1IsSUFPU08sRUE0REosQ0FDTEMsaUJBNUR3QnRDLElBQ3hCLE1BQU0sTUFBRTBCLEVBQUssUUFBRWpCLEdBQVlULEVBQzNCLElBQUl1QyxFQTZCSixPQXpCSUEsRUFGQWIsRUFDRWpCLEVBQVErQixjQUFjQyxTQUFTLE9BQ2pCLHVCQUNQaEMsRUFBUStCLGNBQWNDLFNBQVMsU0FDeEIsd0JBQ1BoQyxFQUFRK0IsY0FBY0MsU0FBUyxRQUN4Qix1QkFDUGhDLEVBQVErQixjQUFjQyxTQUFTLFFBQ3hCLHVCQUNQaEMsRUFBUStCLGNBQWNDLFNBQVMsT0FDeEIsdUJBRUEseUJBRVRoQyxFQUFRK0IsY0FBY0MsU0FBUyxTQUN4Qix5QkFDUGhDLEVBQVErQixjQUFjQyxTQUFTLFNBQ3hCLDBCQUNQaEMsRUFBUStCLGNBQWNDLFNBQVMsUUFDeEIseUJBQ1BoQyxFQUFRK0IsY0FBY0MsU0FBUyxRQUN4Qix5QkFDUGhDLEVBQVErQixjQUFjQyxTQUFTLE9BQ3hCLHlCQUVBLDJCQUVYRixDQUFhLEVBOEJwQkcsU0EzQmdCMUMsSUFDaEIsTUFBTSxNQUFFMEIsRUFBSyxRQUFFakIsR0FBWVQsRUFDM0IsSUFBSWtDLEVBb0JKLE9BaEJJQSxFQUZBUixFQUNFakIsRUFBUStCLGNBQWNDLFNBQVMsT0FDekIsZ0JBQ0NoQyxFQUFRK0IsY0FBY0MsU0FBUyxTQUNoQyxvQkFDQ2hDLEVBQVErQixjQUFjQyxTQUFTLFFBQ2hDLHFCQUNDaEMsRUFBUStCLGNBQWNDLFNBQVMsUUFDaEMscUJBQ0NoQyxFQUFRK0IsY0FBY0MsU0FBUyxPQUNoQyxxQkFFQSxxQkFHRixxQkFHSFAsQ0FBSyxFLDRCQ2xJaEIvQyxRQUFRQyxJQUFJLDBDQUVaLE1BQU11RCxFQUFXLE1BQ2YsTUFBTUMsRUFBZ0JDLFNBQVNDLGNBQWMsa0JBQ3ZDQyxFQUFhRixTQUFTQyxjQUFjLGVBa0YxQyxNQUFPLENBQ0xFLFdBakZpQixDQUFDQyxFQUFhQyxFQUFnQkMsS0FDL0MsSUFBS0YsRUFDSCxPQUdGLE1BQU0sS0FDSmhELEVBQUksVUFDSkUsRUFBUyxZQUNURSxFQUFXLFFBQ1hJLEVBQU8sYUFDUEUsRUFBWSxhQUNaRSxFQUFZLFdBQ1pFLEVBQVUsV0FDVkUsRUFBVSxTQUNWRSxFQUFRLFVBQ1JDLEVBQVMsY0FDVEUsRUFBYSxXQUNiRSxHQUNFeUIsRUFHSixLQUFPTCxFQUFjUSxZQUNuQlIsRUFBY1EsV0FBV0MsU0FHM0IsTUFBTUMsRUFBVVQsU0FBU1UsY0FBYyxNQUN2Q0QsRUFBUUUsWUFBY3ZELEVBQ3RCMkMsRUFBY2EsWUFBWUgsR0FFMUIsTUFBTUksRUFBZ0JiLFNBQVNVLGNBQWMsS0FDdkNJLEVBQU94RCxFQUFVeUQsTUFBTSxLQUFLLEdBQ2xDRixFQUFjRixZQUFjRyxFQUM1QmYsRUFBY2EsWUFBWUMsR0FFMUIsTUFBTUcsRUFBaUJoQixTQUFTVSxjQUFjLE9BQzlDTSxFQUFlQyxJQUFNekQsRUFDckJ3RCxFQUFlRSxJQUFNdEQsRUFDckJtQyxFQUFjYSxZQUFZSSxHQUUxQixNQUFNRyxFQUFjbkIsU0FBU1UsY0FBYyxLQUMzQ1MsRUFBWVIsWUFBYyxZQUFZL0MsSUFDdENtQyxFQUFjYSxZQUFZTyxHQUUxQixNQUFNQyxFQUFrQnBCLFNBQVNVLGNBQWMsS0FDekNXLEVBQW1CaEIsRUFBaUJ2QyxFQUFlRSxFQUN6RG9ELEVBQWdCVCxZQUFjLGdCQUFnQlUsS0FDNUNoQixFQUFpQixJQUFNLE1BRXpCTixFQUFjYSxZQUFZUSxHQUUxQixNQUFNRSxFQUFnQnRCLFNBQVNVLGNBQWMsS0FDdkNhLEVBQWlCakIsRUFBc0JwQyxFQUFhRSxFQUMxRGtELEVBQWNYLFlBQWMsZUFBZVksS0FDekNsQixFQUFpQixJQUFNLE1BRXpCTixFQUFjYSxZQUFZVSxHQUUxQixNQUFNRSxFQUFleEIsU0FBU1UsY0FBYyxLQUM1Q2MsRUFBYWIsWUFBYyxhQUFhckMsS0FDeEN5QixFQUFjYSxZQUFZWSxHQUUxQixNQUFNQyxFQUFnQnpCLFNBQVNVLGNBQWMsS0FDN0NlLEVBQWNkLFlBQWMsZUFBZXBDLFNBQzNDd0IsRUFBY2EsWUFBWWEsR0FFMUIsTUFBTUMsRUFBb0IxQixTQUFTVSxjQUFjLEtBQ2pEZ0IsRUFBa0JmLFlBQWMsbUJBQW1CbEMsSUFDbkRzQixFQUFjYSxZQUFZYyxHQUUxQixNQUFNQyxFQUFpQjNCLFNBQVNVLGNBQWMsS0FDOUNpQixFQUFlaEIsWUFBYyxlQUFlaEMsT0FDNUNvQixFQUFjYSxZQUFZZSxFQUFlLEVBV3pDQyxPQVJhbEYsTUFBTzBELElBQ3BCLE1BQU1mLFFBQWMsY0FBZWUsR0FDN0J5QixRQUFlLGdCQUFvQnhDLEdBQ3pDYSxFQUFXZSxJQUFNWSxDQUFNLEVBTzFCLEVBeEZnQixHQTBGRSxNQUNqQixNQUFNQyxFQUFjOUIsU0FBU0MsY0FBYyxtQkFDckM4QixFQUFlL0IsU0FBU0MsY0FBYyxjQUN0QytCLEVBQWVoQyxTQUFTQyxjQUFjLGNBRTVDLElBQUlHLEVBQWMsS0FDZEMsR0FBaUIsRUFDakJDLEdBQXNCLEVBRTFCLE1BQU0yQixFQUFldkYsTUFBT3dGLElBQzFCQSxFQUFNQyxpQkFDTixNQUFNeEYsRUFBV21GLEVBQVlNLE1BQzdCLElBRUVoQyxRQUFvQiwwQkFBZ0N6RCxHQUNwRG1ELEVBQVNLLFdBQVdDLEVBQWFDLEVBQWdCQyxHQUdqRCxNQUFNK0IsRUFBcUIsc0JBQXVCakMsR0FDbERKLFNBQVNzQyxLQUFLQyxNQUFNQyxnQkFBa0IsT0FBT0gsV0FHdkN2QyxFQUFTOEIsT0FBT3hCLEVBQ3hCLENBQUUsTUFBT25CLEdBQ1AzQyxRQUFRMkMsTUFBTSwyQ0FBNENBLEVBQzVELEdBR0l3RCxFQUF3QixLQUM1QnBDLEdBQWtCQSxFQUNsQkMsR0FBdUJBLEVBQ3ZCUixFQUFTSyxXQUFXQyxFQUFhQyxFQUFnQkMsR0FDakQwQixFQUFhckIsWUFBY04sRUFBaUIsVUFBWSxZQUFZLEVBNkJ0RSxNQUFPLENBQ0xxQyxLQWRXLEtBQ1hYLEVBQWFZLGlCQUFpQixRQUFTVixHQUN2Q0gsRUFBWWEsaUJBQWlCLFdBQVlULElBQ2pCLEtBQWxCQSxFQUFNVSxTQUNSWCxFQUFhQyxFQUNmLElBR0ZGLEVBQWFXLGlCQUFpQixRQUFTRixHQXJCbEIvRixXQUVyQixJQUNFMEQsUUFBb0IsMEJBRkYsWUFHbEJOLEVBQVNLLFdBQVdDLEVBQWFDLEVBQWdCQyxHQUNqRCxNQUFNK0IsRUFBcUIsc0JBQXVCakMsR0FDbERKLFNBQVNzQyxLQUFLQyxNQUFNQyxnQkFBa0IsT0FBT0gsV0FDdkN2QyxFQUFTOEIsT0FBT3hCLEVBQ3hCLENBQUUsTUFBT25CLEdBQ1AzQyxRQUFRMkMsTUFBTSwyQ0FBNENBLEVBQzVELEdBYUE0RCxFQUFnQixFQU1uQixFQWhFa0IsR0FrRVJILE0sR0NoS1BJLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDQ3JCQUosRUFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNORFQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZoQixFQUFvQixLQUNNQSxFQUFvQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvLi9zcmMvYXBwTG9naWMuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvLi9zcmMvaW50ZXJmYWNlLmpzIiwid2VicGFjazovL3dlYXRoZXJfYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYXRoZXJfYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYXRoZXJfYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZyhcInRoaXMgc2VlbSB0byBiZSB3b3JraW5nIChhcHBMb2dpYy5qcylcIik7XG5cbmV4cG9ydCBjb25zdCBXZWF0aGVyQVBJID0gKCgpID0+IHtcbiAgY29uc3QgcHJvY2Vzc0RhdGEgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGEgPSB7XG4gICAgICAvLyBhbGxEYXRhOiBkYXRhLFxuICAgICAgY2l0eTogZGF0YS5sb2NhdGlvbi5uYW1lLFxuICAgICAgbG9jYWxUaW1lOiBkYXRhLmxvY2F0aW9uLmxvY2FsdGltZSxcbiAgICAgIHdlYXRoZXJJY29uOiBkYXRhLmN1cnJlbnQuY29uZGl0aW9uLmljb24sXG4gICAgICB3ZWF0aGVyOiBkYXRhLmN1cnJlbnQuY29uZGl0aW9uLnRleHQsXG4gICAgICB0ZW1wZXJhdHVyZUM6IGRhdGEuY3VycmVudC50ZW1wX2MsXG4gICAgICB0ZW1wZXJhdHVyZUY6IGRhdGEuY3VycmVudC50ZW1wX2YsXG4gICAgICBmZWVsc0xpa2VDOiBkYXRhLmN1cnJlbnQuZmVlbHNsaWtlX2MsXG4gICAgICBmZWVsc0xpa2VGOiBkYXRhLmN1cnJlbnQuZmVlbHNsaWtlX2YsXG4gICAgICBodW1pZGl0eTogZGF0YS5jdXJyZW50Lmh1bWlkaXR5LFxuICAgICAgd2luZFNwZWVkOiBkYXRhLmN1cnJlbnQud2luZF9rcGgsXG4gICAgICB3aW5kRGlyZWN0aW9uOiBkYXRhLmN1cnJlbnQud2luZF9kaXIsXG4gICAgICB2aXNpYmlsaXR5OiBkYXRhLmN1cnJlbnQudmlzX2ttLFxuICAgICAgaXNEYXk6IGRhdGEuY3VycmVudC5pc19kYXkgPT09IDEsXG4gICAgfTtcbiAgICByZXR1cm4gcHJvY2Vzc2VkRGF0YTtcbiAgfTtcblxuICBjb25zdCBnZXRXZWF0aGVyQnlMb2NhdGlvbiA9IGFzeW5jIChsb2NhdGlvbikgPT4ge1xuICAgIGNvbnN0IGFwaUtleSA9IFwiY2U2YWNjMzQ5MzRjNDdmMzkxNjE4MTQyMzIzMjMwNVwiO1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9jdXJyZW50Lmpzb24/a2V5PSR7YXBpS2V5fSZxPSR7bG9jYXRpb259YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBtb2RlOiBcImNvcnNcIiB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGZldGNoIHdlYXRoZXIgZGF0YS5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zdCBmaW5hbERhdGEgPSBhd2FpdCBwcm9jZXNzRGF0YShkYXRhKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsRGF0YTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VycmVkOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFdlYXRoZXJCeUxvY2F0aW9uLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IEdpcGh5QVBJID0gKCgpID0+IHtcbiAgY29uc3QgcHJvY2Vzc0dpZkRhdGEgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGdpZlVybCA9IGRhdGEuZGF0YS5pbWFnZXMub3JpZ2luYWwudXJsO1xuICAgIHJldHVybiBnaWZVcmw7XG4gIH07XG5cbiAgY29uc3QgZ2V0R2lmQnlJZCA9IGFzeW5jIChnaWZJZCkgPT4ge1xuICAgIGNvbnN0IGFwaUtleSA9IFwiOGV3R2U1dnRlSUVSRlVQRTZaYmNGdXFoN21DSVVJellcIjtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMvJHtnaWZJZH0/YXBpX2tleT0ke2FwaUtleX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZmV0Y2ggR0lGIGRhdGEuXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc3QgZ2lmVXJsID0gcHJvY2Vzc0dpZkRhdGEoZGF0YSk7XG4gICAgICAgIHJldHVybiBnaWZVcmw7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZDpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0R2lmQnlJZCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBVdGlscyA9ICgoKSA9PiB7XG4gIGNvbnN0IHN3aXRjaEJhY2tncm91bmQgPSAoZmluYWxEYXRhKSA9PiB7XG4gICAgY29uc3QgeyBpc0RheSwgd2VhdGhlciB9ID0gZmluYWxEYXRhO1xuICAgIGxldCBiYWNrZ3JvdW5kVXJsO1xuXG4gICAgaWYgKGlzRGF5KSB7XG4gICAgICBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic3VuXCIpKSB7XG4gICAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9zdW5ueV9kYXkuanBnXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNsb3VkXCIpKSB7XG4gICAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9jbG91ZHlfZGF5LmpwZ1wiO1xuICAgICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyYWluXCIpKSB7XG4gICAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9yYWlueV9kYXkuanBnXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInNub3dcIikpIHtcbiAgICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL3Nub3d5X2RheS5qcGdcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZm9nXCIpKSB7XG4gICAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9mb2dneV9kYXkuanBnXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvZGVmYXVsdF9kYXkuanBnXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJjbGVhclwiKSkge1xuICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2NsZWFyX25pZ2h0LmpwZ1wiO1xuICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiY2xvdWRcIikpIHtcbiAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9jbG91ZHlfbmlnaHQuanBnXCI7XG4gICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyYWluXCIpKSB7XG4gICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvcmFpbnlfbmlnaHQuanBnXCI7XG4gICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzbm93XCIpKSB7XG4gICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvc25vd3lfbmlnaHQuanBnXCI7XG4gICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJmb2dcIikpIHtcbiAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9mb2dneV9uaWdodC5qcGdcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2RlZmF1bHRfbmlnaHQuanBnXCI7XG4gICAgfVxuICAgIHJldHVybiBiYWNrZ3JvdW5kVXJsO1xuICB9O1xuXG4gIGNvbnN0IHNldEdpZklkID0gKGZpbmFsRGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgaXNEYXksIHdlYXRoZXIgfSA9IGZpbmFsRGF0YTtcbiAgICBsZXQgZ2lmSWQ7XG5cbiAgICBpZiAoaXNEYXkpIHtcbiAgICAgIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzdW5cIikpIHtcbiAgICAgICAgZ2lmSWQgPSBcIjNjQjdhT002MzQ3UFdcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiY2xvdWRcIikpIHtcbiAgICAgICAgZ2lmSWQgPSBcImwwSGxRZGs4a0k5S0lPakJlXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInJhaW5cIikpIHtcbiAgICAgICAgZ2lmSWQgPSBcIjBvcFpQYjl5dWdORkVkM2tGUVwiO1xuICAgICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzbm93XCIpKSB7XG4gICAgICAgIGdpZklkID0gXCI5anZqdVNTa01PWVR5UWZKamlcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZm9nXCIpKSB7XG4gICAgICAgIGdpZklkID0gXCI0Q05UOE5xYm9LYTJVR3B6aFdcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdpZklkID0gXCJmR3MyOW9oS2tOS3dWNHh4S1dcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ2lmSWQgPSBcImRZR0NVNml0Y2NWSmJkeXllYlwiO1xuICAgIH1cblxuICAgIHJldHVybiBnaWZJZDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHN3aXRjaEJhY2tncm91bmQsXG4gICAgc2V0R2lmSWQsXG4gIH07XG59KSgpO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9leHRlbnNpb25zLCBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHsgV2VhdGhlckFQSSwgR2lwaHlBUEksIFV0aWxzIH0gZnJvbSBcIi4vYXBwTG9naWMuanNcIjtcblxuY29uc29sZS5sb2coXCJ0aGlzIHNlZW0gdG8gYmUgd29ya2luZyAoaW50ZXJmYWNlLmpzKVwiKTtcblxuY29uc3QgUmVuZGVyZXIgPSAoKCkgPT4ge1xuICBjb25zdCBkYXRhQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkYXRhQ29udGFpbmVyXCIpO1xuICBjb25zdCB3ZWF0aGVyR2lmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3ZWF0aGVyR2lmXCIpO1xuXG4gIGNvbnN0IHJlbmRlckRhdGEgPSAod2VhdGhlckRhdGEsIHVzZUNlbHNpdXNUZW1wLCB1c2VDZWxzaXVzRmVlbHNMaWtlKSA9PiB7XG4gICAgaWYgKCF3ZWF0aGVyRGF0YSkge1xuICAgICAgcmV0dXJuOyAvLyBFeGl0IGlmIHdlYXRoZXJEYXRhIGlzIG51bGwgb3IgdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgY2l0eSxcbiAgICAgIGxvY2FsVGltZSxcbiAgICAgIHdlYXRoZXJJY29uLFxuICAgICAgd2VhdGhlcixcbiAgICAgIHRlbXBlcmF0dXJlQyxcbiAgICAgIHRlbXBlcmF0dXJlRixcbiAgICAgIGZlZWxzTGlrZUMsXG4gICAgICBmZWVsc0xpa2VGLFxuICAgICAgaHVtaWRpdHksXG4gICAgICB3aW5kU3BlZWQsXG4gICAgICB3aW5kRGlyZWN0aW9uLFxuICAgICAgdmlzaWJpbGl0eSxcbiAgICB9ID0gd2VhdGhlckRhdGE7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyBjb250ZW50XG4gICAgd2hpbGUgKGRhdGFDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgZGF0YUNvbnRhaW5lci5maXJzdENoaWxkLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgaGVhZGluZy50ZXh0Q29udGVudCA9IGNpdHk7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkaW5nKTtcblxuICAgIGNvbnN0IGxvY2FsVGltZVBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBjb25zdCB0aW1lID0gbG9jYWxUaW1lLnNwbGl0KFwiIFwiKVsxXTsgLy8gRXh0cmFjdCB0aGUgdGltZSBwb3J0aW9uXG4gICAgbG9jYWxUaW1lUGFyYS50ZXh0Q29udGVudCA9IHRpbWU7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2NhbFRpbWVQYXJhKTtcblxuICAgIGNvbnN0IHdlYXRoZXJJY29uSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICB3ZWF0aGVySWNvbkltZy5zcmMgPSB3ZWF0aGVySWNvbjtcbiAgICB3ZWF0aGVySWNvbkltZy5hbHQgPSB3ZWF0aGVyO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQod2VhdGhlckljb25JbWcpO1xuXG4gICAgY29uc3Qgd2VhdGhlclBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB3ZWF0aGVyUGFyYS50ZXh0Q29udGVudCA9IGBXZWF0aGVyOiAke3dlYXRoZXJ9YDtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKHdlYXRoZXJQYXJhKTtcblxuICAgIGNvbnN0IHRlbXBlcmF0dXJlUGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IHRlbXBlcmF0dXJlVmFsdWUgPSB1c2VDZWxzaXVzVGVtcCA/IHRlbXBlcmF0dXJlQyA6IHRlbXBlcmF0dXJlRjtcbiAgICB0ZW1wZXJhdHVyZVBhcmEudGV4dENvbnRlbnQgPSBgVGVtcGVyYXR1cmU6ICR7dGVtcGVyYXR1cmVWYWx1ZX3CsCR7XG4gICAgICB1c2VDZWxzaXVzVGVtcCA/IFwiQ1wiIDogXCJGXCJcbiAgICB9YDtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKHRlbXBlcmF0dXJlUGFyYSk7XG5cbiAgICBjb25zdCBmZWVsc0xpa2VQYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29uc3QgZmVlbHNMaWtlVmFsdWUgPSB1c2VDZWxzaXVzRmVlbHNMaWtlID8gZmVlbHNMaWtlQyA6IGZlZWxzTGlrZUY7XG4gICAgZmVlbHNMaWtlUGFyYS50ZXh0Q29udGVudCA9IGBGZWVscyBMaWtlOiAke2ZlZWxzTGlrZVZhbHVlfcKwJHtcbiAgICAgIHVzZUNlbHNpdXNUZW1wID8gXCJDXCIgOiBcIkZcIlxuICAgIH1gO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQoZmVlbHNMaWtlUGFyYSk7XG5cbiAgICBjb25zdCBodW1pZGl0eVBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBodW1pZGl0eVBhcmEudGV4dENvbnRlbnQgPSBgSHVtaWRpdHk6ICR7aHVtaWRpdHl9JWA7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZChodW1pZGl0eVBhcmEpO1xuXG4gICAgY29uc3Qgd2luZFNwZWVkUGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHdpbmRTcGVlZFBhcmEudGV4dENvbnRlbnQgPSBgV2luZCBTcGVlZDogJHt3aW5kU3BlZWR9IGttL2hgO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQod2luZFNwZWVkUGFyYSk7XG5cbiAgICBjb25zdCB3aW5kRGlyZWN0aW9uUGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHdpbmREaXJlY3Rpb25QYXJhLnRleHRDb250ZW50ID0gYFdpbmQgRGlyZWN0aW9uOiAke3dpbmREaXJlY3Rpb259YDtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKHdpbmREaXJlY3Rpb25QYXJhKTtcblxuICAgIGNvbnN0IHZpc2liaWxpdHlQYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgdmlzaWJpbGl0eVBhcmEudGV4dENvbnRlbnQgPSBgVmlzaWJpbGl0eTogJHt2aXNpYmlsaXR5fSBrbWA7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZCh2aXNpYmlsaXR5UGFyYSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0R2lmID0gYXN5bmMgKHdlYXRoZXJEYXRhKSA9PiB7XG4gICAgY29uc3QgZ2lmSWQgPSBhd2FpdCBVdGlscy5zZXRHaWZJZCh3ZWF0aGVyRGF0YSk7XG4gICAgY29uc3QgZ2lmVXJsID0gYXdhaXQgR2lwaHlBUEkuZ2V0R2lmQnlJZChnaWZJZCk7XG4gICAgd2VhdGhlckdpZi5zcmMgPSBnaWZVcmw7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZW5kZXJEYXRhLFxuICAgIHNldEdpZixcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2VhcmNoTG9jYXRpb25cIik7XG4gIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2VhcmNoQnRuXCIpO1xuICBjb25zdCB0b2dnbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZ2dsZUJ0blwiKTtcblxuICBsZXQgd2VhdGhlckRhdGEgPSBudWxsO1xuICBsZXQgdXNlQ2Vsc2l1c1RlbXAgPSB0cnVlO1xuICBsZXQgdXNlQ2Vsc2l1c0ZlZWxzTGlrZSA9IHRydWU7XG5cbiAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBsb2NhdGlvbiA9IHNlYXJjaElucHV0LnZhbHVlO1xuICAgIHRyeSB7XG4gICAgICAvLyBSZW5kZXIgZGF0YVxuICAgICAgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJLmdldFdlYXRoZXJCeUxvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgIFJlbmRlcmVyLnJlbmRlckRhdGEod2VhdGhlckRhdGEsIHVzZUNlbHNpdXNUZW1wLCB1c2VDZWxzaXVzRmVlbHNMaWtlKTtcblxuICAgICAgLy8gQ2hhbmdlIGJhY2tncm91bmRcbiAgICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZVVybCA9IFV0aWxzLnN3aXRjaEJhY2tncm91bmQod2VhdGhlckRhdGEpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YmFja2dyb3VuZEltYWdlVXJsfSlgO1xuXG4gICAgICAvLyBDaGFuZ2UgZ2lmXG4gICAgICBhd2FpdCBSZW5kZXJlci5zZXRHaWYod2VhdGhlckRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2NjdXJyZWQgZHVyaW5nIHdlYXRoZXIgcmV0cmlldmFsOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVRlbXBlcmF0dXJlVW5pdCA9ICgpID0+IHtcbiAgICB1c2VDZWxzaXVzVGVtcCA9ICF1c2VDZWxzaXVzVGVtcDtcbiAgICB1c2VDZWxzaXVzRmVlbHNMaWtlID0gIXVzZUNlbHNpdXNGZWVsc0xpa2U7XG4gICAgUmVuZGVyZXIucmVuZGVyRGF0YSh3ZWF0aGVyRGF0YSwgdXNlQ2Vsc2l1c1RlbXAsIHVzZUNlbHNpdXNGZWVsc0xpa2UpO1xuICAgIHRvZ2dsZUJ1dHRvbi50ZXh0Q29udGVudCA9IHVzZUNlbHNpdXNUZW1wID8gXCJDZWxzaXVzXCIgOiBcIkZhaHJlbmhlaXRcIjtcbiAgfTtcblxuICBjb25zdCBzZXREZWZhdWx0Q2l0eSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBkZWZhdWx0Q2l0eSA9IFwibmV3IHlvcmtcIjtcbiAgICB0cnkge1xuICAgICAgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJLmdldFdlYXRoZXJCeUxvY2F0aW9uKGRlZmF1bHRDaXR5KTtcbiAgICAgIFJlbmRlcmVyLnJlbmRlckRhdGEod2VhdGhlckRhdGEsIHVzZUNlbHNpdXNUZW1wLCB1c2VDZWxzaXVzRmVlbHNMaWtlKTtcbiAgICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZVVybCA9IFV0aWxzLnN3aXRjaEJhY2tncm91bmQod2VhdGhlckRhdGEpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YmFja2dyb3VuZEltYWdlVXJsfSlgO1xuICAgICAgYXdhaXQgUmVuZGVyZXIuc2V0R2lmKHdlYXRoZXJEYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9jY3VycmVkIGR1cmluZyB3ZWF0aGVyIHJldHJpZXZhbDpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIHNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlU2VhcmNoKTtcbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgICBoYW5kbGVTZWFyY2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVUZW1wZXJhdHVyZVVuaXQpO1xuXG4gICAgc2V0RGVmYXVsdENpdHkoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX3JlcXVpcmVfXyg0NjcpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcbiJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiV2VhdGhlckFQSSIsImdldFdlYXRoZXJCeUxvY2F0aW9uIiwiYXN5bmMiLCJsb2NhdGlvbiIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwib2siLCJkYXRhIiwianNvbiIsImZpbmFsRGF0YSIsImNpdHkiLCJuYW1lIiwibG9jYWxUaW1lIiwibG9jYWx0aW1lIiwid2VhdGhlckljb24iLCJjdXJyZW50IiwiY29uZGl0aW9uIiwiaWNvbiIsIndlYXRoZXIiLCJ0ZXh0IiwidGVtcGVyYXR1cmVDIiwidGVtcF9jIiwidGVtcGVyYXR1cmVGIiwidGVtcF9mIiwiZmVlbHNMaWtlQyIsImZlZWxzbGlrZV9jIiwiZmVlbHNMaWtlRiIsImZlZWxzbGlrZV9mIiwiaHVtaWRpdHkiLCJ3aW5kU3BlZWQiLCJ3aW5kX2twaCIsIndpbmREaXJlY3Rpb24iLCJ3aW5kX2RpciIsInZpc2liaWxpdHkiLCJ2aXNfa20iLCJpc0RheSIsImlzX2RheSIsInByb2Nlc3NEYXRhIiwiRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJHaXBoeUFQSSIsImdldEdpZkJ5SWQiLCJnaWZJZCIsImltYWdlcyIsIm9yaWdpbmFsIiwiVXRpbHMiLCJzd2l0Y2hCYWNrZ3JvdW5kIiwiYmFja2dyb3VuZFVybCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzZXRHaWZJZCIsIlJlbmRlcmVyIiwiZGF0YUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndlYXRoZXJHaWYiLCJyZW5kZXJEYXRhIiwid2VhdGhlckRhdGEiLCJ1c2VDZWxzaXVzVGVtcCIsInVzZUNlbHNpdXNGZWVsc0xpa2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlIiwiaGVhZGluZyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwibG9jYWxUaW1lUGFyYSIsInRpbWUiLCJzcGxpdCIsIndlYXRoZXJJY29uSW1nIiwic3JjIiwiYWx0Iiwid2VhdGhlclBhcmEiLCJ0ZW1wZXJhdHVyZVBhcmEiLCJ0ZW1wZXJhdHVyZVZhbHVlIiwiZmVlbHNMaWtlUGFyYSIsImZlZWxzTGlrZVZhbHVlIiwiaHVtaWRpdHlQYXJhIiwid2luZFNwZWVkUGFyYSIsIndpbmREaXJlY3Rpb25QYXJhIiwidmlzaWJpbGl0eVBhcmEiLCJzZXRHaWYiLCJnaWZVcmwiLCJzZWFyY2hJbnB1dCIsInNlYXJjaEJ1dHRvbiIsInRvZ2dsZUJ1dHRvbiIsImhhbmRsZVNlYXJjaCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImJhY2tncm91bmRJbWFnZVVybCIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRvZ2dsZVRlbXBlcmF0dXJlVW5pdCIsImluaXQiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5Q29kZSIsInNldERlZmF1bHRDaXR5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==