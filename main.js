(()=>{"use strict";var e={467:(e,t,n)=>{n.d(t,{B9:()=>o,QE:()=>r,cQ:()=>a}),console.log("this seem to be working (appLogic.js)");const r={getWeatherByLocation:async e=>{const t=`https://api.weatherapi.com/v1/current.json?key=ce6acc34934c47f3916181423232305&q=${e}`;try{const e=await fetch(t,{mode:"cors"});if(e.ok){const t=await e.json();return await(e=>{const t=e.location.localtime,n=(e=>{const t=new Date(e).getHours();return t>=4&&t<20})(t);return{city:e.location.name,localTime:t,weatherIcon:e.current.condition.icon,weather:e.current.condition.text,temperatureC:e.current.temp_c,temperatureF:e.current.temp_f,feelsLikeC:e.current.feelslike_c,feelsLikeF:e.current.feelslike_f,humidity:e.current.humidity,windSpeed:e.current.wind_kph,windDirection:e.current.wind_dir,visibility:e.current.vis_km,isDay:n}})(t)}throw new Error("Unable to fetch weather data.")}catch(e){throw console.error("An error occurred:",e.message),e}}},o={getGifById:async e=>{const t=`https://api.giphy.com/v1/gifs/${e}?api_key=8ewGe5vteIERFUPE6ZbcFuqh7mCIUIzY`;try{const e=await fetch(t,{mode:"cors"});if(e.ok){return(await e.json()).data.images.original.url}throw new Error("Unable to fetch GIF data.")}catch(e){throw console.error("An error occurred:",e.message),e}}},a={switchBackground:e=>{const{isDay:t,weather:n}=e;let r;return r=t?n.toLowerCase().includes("sun")?"images/sunny_day.jpg":n.toLowerCase().includes("cloud")?"images/cloudy_day.jpg":n.toLowerCase().includes("rain")?"images/rainy_day.jpg":n.toLowerCase().includes("snow")?"images/snowy_day.jpg":n.toLowerCase().includes("fog")?"images/foggy_day.jpg":"images/default_day.jpg":n.toLowerCase().includes("clear")?"images/clear_night.jpg":n.toLowerCase().includes("cloud")?"images/cloudy_night.jpg":n.toLowerCase().includes("rain")?"images/rainy_night.jpg":n.toLowerCase().includes("snow")?"images/snowy_night.jpg":n.toLowerCase().includes("fog")?"images/foggy_night.jpg":"images/default_night.jpg",r},setGifId:e=>{const{isDay:t,weather:n}=e;let r;return r=t?n.toLowerCase().includes("sun")?"KZkiw30m1vgjZr6L3a":n.toLowerCase().includes("cloud")?"l0HlQdk8kI9KIOjBe":n.toLowerCase().includes("rain")?"0opZPb9yugNFEd3kFQ":n.toLowerCase().includes("snow")?"9jvjuSSkMOYTyQfJji":n.toLowerCase().includes("fog")?"4CNT8NqboKa2UGpzhW":"fGs29ohKkNKwV4xxKW":"dYGCU6itccVJbdyyeb",r}}},24:(e,t,n)=>{var r=n(467);console.log("this seem to be working (interface.js)");const o=(()=>{const e=document.querySelector("#dataContainer"),t=document.querySelector("#weatherGif");return{renderData:(t,n,r)=>{if(!t)return;const{city:o,localTime:a,weatherIcon:c,weather:i,temperatureC:s,temperatureF:d,feelsLikeC:l,feelsLikeF:u,humidity:m,windSpeed:p,windDirection:g,visibility:h}=t;for(;e.firstChild;)e.firstChild.remove();const w=document.createElement("h2");w.textContent=o,e.appendChild(w);const y=document.createElement("p"),C=a.split(" ")[1];y.textContent=C,e.appendChild(y);const f=document.createElement("img");f.src=c,f.alt=i,e.appendChild(f);const k=document.createElement("p");k.textContent=`Weather: ${i}`,e.appendChild(k);const L=document.createElement("p"),j=n?s:d;L.textContent=`Temperature: ${j}°${n?"C":"F"}`,e.appendChild(L);const E=document.createElement("p"),v=r?l:u;E.textContent=`Feels Like: ${v}°${n?"C":"F"}`,e.appendChild(E);const _=document.createElement("p");_.textContent=`Humidity: ${m}%`,e.appendChild(_);const b=document.createElement("p");b.textContent=`Wind Speed: ${p} km/h`,e.appendChild(b);const x=document.createElement("p");x.textContent=`Wind Direction: ${g}`,e.appendChild(x);const I=document.createElement("p");I.textContent=`Visibility: ${h} km`,e.appendChild(I)},setGif:async e=>{const n=await r.cQ.setGifId(e),o=await r.B9.getGifById(n);t.src=o}}})();(()=>{const e=document.querySelector("#searchLocation"),t=document.querySelector("#searchBtn"),n=document.querySelector("#toggleBtn");let a=null,c=!0,i=!0;const s=async t=>{t.preventDefault();const n=e.value;try{a=await r.QE.getWeatherByLocation(n),o.renderData(a,c,i);const e=r.cQ.switchBackground(a);document.body.style.backgroundImage=`url(${e})`,await o.setGif(a)}catch(e){console.error("Error occurred during weather retrieval:",e)}},d=()=>{c=!c,i=!i,o.renderData(a,c,i),n.textContent=c?"Celsius":"Fahrenheit"};return{init:()=>{t.addEventListener("click",s),e.addEventListener("keydown",(e=>{13===e.keyCode&&s(e)})),n.addEventListener("click",d),(async()=>{try{a=await r.QE.getWeatherByLocation("new york"),o.renderData(a,c,i);const e=r.cQ.switchBackground(a);document.body.style.backgroundImage=`url(${e})`,await o.setGif(a)}catch(e){console.error("Error occurred during weather retrieval:",e)}})()}}})().init()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(467),n(24)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXRoZXJfYXBwLy4vc3JjL2FwcExvZ2ljLmpzIiwid2VicGFjazovL3dlYXRoZXJfYXBwLy4vc3JjL2ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2VhdGhlcl9hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWF0aGVyX2FwcC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc29sZS5sb2coXCJ0aGlzIHNlZW0gdG8gYmUgd29ya2luZyAoYXBwTG9naWMuanMpXCIpO1xuXG5leHBvcnQgY29uc3QgV2VhdGhlckFQSSA9ICgoKSA9PiB7XG4gIGNvbnN0IGlzRGF5VGltZSA9IChsb2NhbFRpbWUpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGxvY2FsVGltZSk7XG4gICAgY29uc3QgY3VycmVudEhvdXIgPSBjdXJyZW50VGltZS5nZXRIb3VycygpO1xuICAgIHJldHVybiBjdXJyZW50SG91ciA+PSA0ICYmIGN1cnJlbnRIb3VyIDwgMjA7XG4gIH07XG5cbiAgY29uc3QgcHJvY2Vzc0RhdGEgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGxvY2FsVGltZSA9IGRhdGEubG9jYXRpb24ubG9jYWx0aW1lO1xuICAgIGNvbnN0IGlzRGF5ID0gaXNEYXlUaW1lKGxvY2FsVGltZSk7XG5cbiAgICBjb25zdCBwcm9jZXNzZWREYXRhID0ge1xuICAgICAgY2l0eTogZGF0YS5sb2NhdGlvbi5uYW1lLFxuICAgICAgbG9jYWxUaW1lLFxuICAgICAgd2VhdGhlckljb246IGRhdGEuY3VycmVudC5jb25kaXRpb24uaWNvbixcbiAgICAgIHdlYXRoZXI6IGRhdGEuY3VycmVudC5jb25kaXRpb24udGV4dCxcbiAgICAgIHRlbXBlcmF0dXJlQzogZGF0YS5jdXJyZW50LnRlbXBfYyxcbiAgICAgIHRlbXBlcmF0dXJlRjogZGF0YS5jdXJyZW50LnRlbXBfZixcbiAgICAgIGZlZWxzTGlrZUM6IGRhdGEuY3VycmVudC5mZWVsc2xpa2VfYyxcbiAgICAgIGZlZWxzTGlrZUY6IGRhdGEuY3VycmVudC5mZWVsc2xpa2VfZixcbiAgICAgIGh1bWlkaXR5OiBkYXRhLmN1cnJlbnQuaHVtaWRpdHksXG4gICAgICB3aW5kU3BlZWQ6IGRhdGEuY3VycmVudC53aW5kX2twaCxcbiAgICAgIHdpbmREaXJlY3Rpb246IGRhdGEuY3VycmVudC53aW5kX2RpcixcbiAgICAgIHZpc2liaWxpdHk6IGRhdGEuY3VycmVudC52aXNfa20sXG4gICAgICBpc0RheSxcbiAgICB9O1xuICAgIHJldHVybiBwcm9jZXNzZWREYXRhO1xuICB9O1xuXG4gIGNvbnN0IGdldFdlYXRoZXJCeUxvY2F0aW9uID0gYXN5bmMgKGxvY2F0aW9uKSA9PiB7XG4gICAgY29uc3QgYXBpS2V5ID0gXCJjZTZhY2MzNDkzNGM0N2YzOTE2MTgxNDIzMjMyMzA1XCI7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2N1cnJlbnQuanNvbj9rZXk9JHthcGlLZXl9JnE9JHtsb2NhdGlvbn1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZmV0Y2ggd2VhdGhlciBkYXRhLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRGF0YSA9IGF3YWl0IHByb2Nlc3NEYXRhKGRhdGEpO1xuICAgICAgICByZXR1cm4gZmluYWxEYXRhO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQ6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0V2VhdGhlckJ5TG9jYXRpb24sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgR2lwaHlBUEkgPSAoKCkgPT4ge1xuICBjb25zdCBwcm9jZXNzR2lmRGF0YSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgZ2lmVXJsID0gZGF0YS5kYXRhLmltYWdlcy5vcmlnaW5hbC51cmw7XG4gICAgcmV0dXJuIGdpZlVybDtcbiAgfTtcblxuICBjb25zdCBnZXRHaWZCeUlkID0gYXN5bmMgKGdpZklkKSA9PiB7XG4gICAgY29uc3QgYXBpS2V5ID0gXCI4ZXdHZTV2dGVJRVJGVVBFNlpiY0Z1cWg3bUNJVUl6WVwiO1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXBoeS5jb20vdjEvZ2lmcy8ke2dpZklkfT9hcGlfa2V5PSR7YXBpS2V5fWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbW9kZTogXCJjb3JzXCIgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBmZXRjaCBHSUYgZGF0YS5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zdCBnaWZVcmwgPSBwcm9jZXNzR2lmRGF0YShkYXRhKTtcbiAgICAgICAgcmV0dXJuIGdpZlVybDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkFuIGVycm9yIG9jY3VycmVkOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRHaWZCeUlkLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IFV0aWxzID0gKCgpID0+IHtcbiAgY29uc3Qgc3dpdGNoQmFja2dyb3VuZCA9IChmaW5hbERhdGEpID0+IHtcbiAgICBjb25zdCB7IGlzRGF5LCB3ZWF0aGVyIH0gPSBmaW5hbERhdGE7XG4gICAgbGV0IGJhY2tncm91bmRVcmw7XG5cbiAgICBpZiAoaXNEYXkpIHtcbiAgICAgIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJzdW5cIikpIHtcbiAgICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL3N1bm55X2RheS5qcGdcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiY2xvdWRcIikpIHtcbiAgICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2Nsb3VkeV9kYXkuanBnXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInJhaW5cIikpIHtcbiAgICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL3JhaW55X2RheS5qcGdcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic25vd1wiKSkge1xuICAgICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvc25vd3lfZGF5LmpwZ1wiO1xuICAgICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJmb2dcIikpIHtcbiAgICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2ZvZ2d5X2RheS5qcGdcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9kZWZhdWx0X2RheS5qcGdcIjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNsZWFyXCIpKSB7XG4gICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvY2xlYXJfbmlnaHQuanBnXCI7XG4gICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJjbG91ZFwiKSkge1xuICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2Nsb3VkeV9uaWdodC5qcGdcIjtcbiAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInJhaW5cIikpIHtcbiAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9yYWlueV9uaWdodC5qcGdcIjtcbiAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInNub3dcIikpIHtcbiAgICAgIGJhY2tncm91bmRVcmwgPSBcImltYWdlcy9zbm93eV9uaWdodC5qcGdcIjtcbiAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImZvZ1wiKSkge1xuICAgICAgYmFja2dyb3VuZFVybCA9IFwiaW1hZ2VzL2ZvZ2d5X25pZ2h0LmpwZ1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYWNrZ3JvdW5kVXJsID0gXCJpbWFnZXMvZGVmYXVsdF9uaWdodC5qcGdcIjtcbiAgICB9XG4gICAgcmV0dXJuIGJhY2tncm91bmRVcmw7XG4gIH07XG5cbiAgY29uc3Qgc2V0R2lmSWQgPSAoZmluYWxEYXRhKSA9PiB7XG4gICAgY29uc3QgeyBpc0RheSwgd2VhdGhlciB9ID0gZmluYWxEYXRhO1xuICAgIGxldCBnaWZJZDtcblxuICAgIGlmIChpc0RheSkge1xuICAgICAgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInN1blwiKSkge1xuICAgICAgICBnaWZJZCA9IFwiS1praXczMG0xdmdqWnI2TDNhXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNsb3VkXCIpKSB7XG4gICAgICAgIGdpZklkID0gXCJsMEhsUWRrOGtJOUtJT2pCZVwiO1xuICAgICAgfSBlbHNlIGlmICh3ZWF0aGVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyYWluXCIpKSB7XG4gICAgICAgIGdpZklkID0gXCIwb3BaUGI5eXVnTkZFZDNrRlFcIjtcbiAgICAgIH0gZWxzZSBpZiAod2VhdGhlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic25vd1wiKSkge1xuICAgICAgICBnaWZJZCA9IFwiOWp2anVTU2tNT1lUeVFmSmppXCI7XG4gICAgICB9IGVsc2UgaWYgKHdlYXRoZXIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImZvZ1wiKSkge1xuICAgICAgICBnaWZJZCA9IFwiNENOVDhOcWJvS2EyVUdwemhXXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnaWZJZCA9IFwiZkdzMjlvaEtrTkt3VjR4eEtXXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGdpZklkID0gXCJkWUdDVTZpdGNjVkpiZHl5ZWJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2lmSWQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzd2l0Y2hCYWNrZ3JvdW5kLFxuICAgIHNldEdpZklkLFxuICB9O1xufSkoKTtcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvZXh0ZW5zaW9ucywgbm8tdW51c2VkLXZhcnNcbmltcG9ydCB7IFdlYXRoZXJBUEksIEdpcGh5QVBJLCBVdGlscyB9IGZyb20gXCIuL2FwcExvZ2ljLmpzXCI7XG5cbmNvbnNvbGUubG9nKFwidGhpcyBzZWVtIHRvIGJlIHdvcmtpbmcgKGludGVyZmFjZS5qcylcIik7XG5cbmNvbnN0IFJlbmRlcmVyID0gKCgpID0+IHtcbiAgY29uc3QgZGF0YUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0YUNvbnRhaW5lclwiKTtcbiAgY29uc3Qgd2VhdGhlckdpZiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2VhdGhlckdpZlwiKTtcblxuICBjb25zdCByZW5kZXJEYXRhID0gKHdlYXRoZXJEYXRhLCB1c2VDZWxzaXVzVGVtcCwgdXNlQ2Vsc2l1c0ZlZWxzTGlrZSkgPT4ge1xuICAgIGlmICghd2VhdGhlckRhdGEpIHtcbiAgICAgIHJldHVybjsgLy8gRXhpdCBpZiB3ZWF0aGVyRGF0YSBpcyBudWxsIG9yIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIGNpdHksXG4gICAgICBsb2NhbFRpbWUsXG4gICAgICB3ZWF0aGVySWNvbixcbiAgICAgIHdlYXRoZXIsXG4gICAgICB0ZW1wZXJhdHVyZUMsXG4gICAgICB0ZW1wZXJhdHVyZUYsXG4gICAgICBmZWVsc0xpa2VDLFxuICAgICAgZmVlbHNMaWtlRixcbiAgICAgIGh1bWlkaXR5LFxuICAgICAgd2luZFNwZWVkLFxuICAgICAgd2luZERpcmVjdGlvbixcbiAgICAgIHZpc2liaWxpdHksXG4gICAgfSA9IHdlYXRoZXJEYXRhO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgY29udGVudFxuICAgIHdoaWxlIChkYXRhQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGRhdGFDb250YWluZXIuZmlyc3RDaGlsZC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgIGhlYWRpbmcudGV4dENvbnRlbnQgPSBjaXR5O1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGluZyk7XG5cbiAgICBjb25zdCBsb2NhbFRpbWVQYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29uc3QgdGltZSA9IGxvY2FsVGltZS5zcGxpdChcIiBcIilbMV07IC8vIEV4dHJhY3QgdGhlIHRpbWUgcG9ydGlvblxuICAgIGxvY2FsVGltZVBhcmEudGV4dENvbnRlbnQgPSB0aW1lO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQobG9jYWxUaW1lUGFyYSk7XG5cbiAgICBjb25zdCB3ZWF0aGVySWNvbkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgd2VhdGhlckljb25JbWcuc3JjID0gd2VhdGhlckljb247XG4gICAgd2VhdGhlckljb25JbWcuYWx0ID0gd2VhdGhlcjtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKHdlYXRoZXJJY29uSW1nKTtcblxuICAgIGNvbnN0IHdlYXRoZXJQYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgd2VhdGhlclBhcmEudGV4dENvbnRlbnQgPSBgV2VhdGhlcjogJHt3ZWF0aGVyfWA7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyUGFyYSk7XG5cbiAgICBjb25zdCB0ZW1wZXJhdHVyZVBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBjb25zdCB0ZW1wZXJhdHVyZVZhbHVlID0gdXNlQ2Vsc2l1c1RlbXAgPyB0ZW1wZXJhdHVyZUMgOiB0ZW1wZXJhdHVyZUY7XG4gICAgdGVtcGVyYXR1cmVQYXJhLnRleHRDb250ZW50ID0gYFRlbXBlcmF0dXJlOiAke3RlbXBlcmF0dXJlVmFsdWV9wrAke1xuICAgICAgdXNlQ2Vsc2l1c1RlbXAgPyBcIkNcIiA6IFwiRlwiXG4gICAgfWA7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wZXJhdHVyZVBhcmEpO1xuXG4gICAgY29uc3QgZmVlbHNMaWtlUGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IGZlZWxzTGlrZVZhbHVlID0gdXNlQ2Vsc2l1c0ZlZWxzTGlrZSA/IGZlZWxzTGlrZUMgOiBmZWVsc0xpa2VGO1xuICAgIGZlZWxzTGlrZVBhcmEudGV4dENvbnRlbnQgPSBgRmVlbHMgTGlrZTogJHtmZWVsc0xpa2VWYWx1ZX3CsCR7XG4gICAgICB1c2VDZWxzaXVzVGVtcCA/IFwiQ1wiIDogXCJGXCJcbiAgICB9YDtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKGZlZWxzTGlrZVBhcmEpO1xuXG4gICAgY29uc3QgaHVtaWRpdHlQYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgaHVtaWRpdHlQYXJhLnRleHRDb250ZW50ID0gYEh1bWlkaXR5OiAke2h1bWlkaXR5fSVgO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQoaHVtaWRpdHlQYXJhKTtcblxuICAgIGNvbnN0IHdpbmRTcGVlZFBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB3aW5kU3BlZWRQYXJhLnRleHRDb250ZW50ID0gYFdpbmQgU3BlZWQ6ICR7d2luZFNwZWVkfSBrbS9oYDtcbiAgICBkYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKHdpbmRTcGVlZFBhcmEpO1xuXG4gICAgY29uc3Qgd2luZERpcmVjdGlvblBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB3aW5kRGlyZWN0aW9uUGFyYS50ZXh0Q29udGVudCA9IGBXaW5kIERpcmVjdGlvbjogJHt3aW5kRGlyZWN0aW9ufWA7XG4gICAgZGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZCh3aW5kRGlyZWN0aW9uUGFyYSk7XG5cbiAgICBjb25zdCB2aXNpYmlsaXR5UGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHZpc2liaWxpdHlQYXJhLnRleHRDb250ZW50ID0gYFZpc2liaWxpdHk6ICR7dmlzaWJpbGl0eX0ga21gO1xuICAgIGRhdGFDb250YWluZXIuYXBwZW5kQ2hpbGQodmlzaWJpbGl0eVBhcmEpO1xuICB9O1xuXG4gIGNvbnN0IHNldEdpZiA9IGFzeW5jICh3ZWF0aGVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IGdpZklkID0gYXdhaXQgVXRpbHMuc2V0R2lmSWQod2VhdGhlckRhdGEpO1xuICAgIGNvbnN0IGdpZlVybCA9IGF3YWl0IEdpcGh5QVBJLmdldEdpZkJ5SWQoZ2lmSWQpO1xuICAgIHdlYXRoZXJHaWYuc3JjID0gZ2lmVXJsO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVuZGVyRGF0YSxcbiAgICBzZXRHaWYsXG4gIH07XG59KSgpO1xuXG5jb25zdCBDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlYXJjaExvY2F0aW9uXCIpO1xuICBjb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlYXJjaEJ0blwiKTtcbiAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2dnbGVCdG5cIik7XG5cbiAgbGV0IHdlYXRoZXJEYXRhID0gbnVsbDtcbiAgbGV0IHVzZUNlbHNpdXNUZW1wID0gdHJ1ZTtcbiAgbGV0IHVzZUNlbHNpdXNGZWVsc0xpa2UgPSB0cnVlO1xuXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgbG9jYXRpb24gPSBzZWFyY2hJbnB1dC52YWx1ZTtcbiAgICB0cnkge1xuICAgICAgLy8gUmVuZGVyIGRhdGFcbiAgICAgIHdlYXRoZXJEYXRhID0gYXdhaXQgV2VhdGhlckFQSS5nZXRXZWF0aGVyQnlMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICBSZW5kZXJlci5yZW5kZXJEYXRhKHdlYXRoZXJEYXRhLCB1c2VDZWxzaXVzVGVtcCwgdXNlQ2Vsc2l1c0ZlZWxzTGlrZSk7XG5cbiAgICAgIC8vIENoYW5nZSBiYWNrZ3JvdW5kXG4gICAgICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2VVcmwgPSBVdGlscy5zd2l0Y2hCYWNrZ3JvdW5kKHdlYXRoZXJEYXRhKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2JhY2tncm91bmRJbWFnZVVybH0pYDtcblxuICAgICAgLy8gQ2hhbmdlIGdpZlxuICAgICAgYXdhaXQgUmVuZGVyZXIuc2V0R2lmKHdlYXRoZXJEYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9jY3VycmVkIGR1cmluZyB3ZWF0aGVyIHJldHJpZXZhbDpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0b2dnbGVUZW1wZXJhdHVyZVVuaXQgPSAoKSA9PiB7XG4gICAgdXNlQ2Vsc2l1c1RlbXAgPSAhdXNlQ2Vsc2l1c1RlbXA7XG4gICAgdXNlQ2Vsc2l1c0ZlZWxzTGlrZSA9ICF1c2VDZWxzaXVzRmVlbHNMaWtlO1xuICAgIFJlbmRlcmVyLnJlbmRlckRhdGEod2VhdGhlckRhdGEsIHVzZUNlbHNpdXNUZW1wLCB1c2VDZWxzaXVzRmVlbHNMaWtlKTtcbiAgICB0b2dnbGVCdXR0b24udGV4dENvbnRlbnQgPSB1c2VDZWxzaXVzVGVtcCA/IFwiQ2Vsc2l1c1wiIDogXCJGYWhyZW5oZWl0XCI7XG4gIH07XG5cbiAgY29uc3Qgc2V0RGVmYXVsdENpdHkgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdENpdHkgPSBcIm5ldyB5b3JrXCI7XG4gICAgdHJ5IHtcbiAgICAgIHdlYXRoZXJEYXRhID0gYXdhaXQgV2VhdGhlckFQSS5nZXRXZWF0aGVyQnlMb2NhdGlvbihkZWZhdWx0Q2l0eSk7XG4gICAgICBSZW5kZXJlci5yZW5kZXJEYXRhKHdlYXRoZXJEYXRhLCB1c2VDZWxzaXVzVGVtcCwgdXNlQ2Vsc2l1c0ZlZWxzTGlrZSk7XG4gICAgICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2VVcmwgPSBVdGlscy5zd2l0Y2hCYWNrZ3JvdW5kKHdlYXRoZXJEYXRhKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2JhY2tncm91bmRJbWFnZVVybH0pYDtcbiAgICAgIGF3YWl0IFJlbmRlcmVyLnNldEdpZih3ZWF0aGVyRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCBkdXJpbmcgd2VhdGhlciByZXRyaWV2YWw6XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBzZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVNlYXJjaCk7XG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgaGFuZGxlU2VhcmNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlVGVtcGVyYXR1cmVVbml0KTtcblxuICAgIHNldERlZmF1bHRDaXR5KCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICB9O1xufSkoKTtcblxuQ29udHJvbGxlci5pbml0KCk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oNDY3KTtcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG4iXSwibmFtZXMiOlsiY29uc29sZSIsImxvZyIsIldlYXRoZXJBUEkiLCJnZXRXZWF0aGVyQnlMb2NhdGlvbiIsImFzeW5jIiwibG9jYXRpb24iLCJ1cmwiLCJyZXNwb25zZSIsImZldGNoIiwibW9kZSIsIm9rIiwiZGF0YSIsImpzb24iLCJsb2NhbFRpbWUiLCJsb2NhbHRpbWUiLCJpc0RheSIsImN1cnJlbnRIb3VyIiwiRGF0ZSIsImdldEhvdXJzIiwiaXNEYXlUaW1lIiwiY2l0eSIsIm5hbWUiLCJ3ZWF0aGVySWNvbiIsImN1cnJlbnQiLCJjb25kaXRpb24iLCJpY29uIiwid2VhdGhlciIsInRleHQiLCJ0ZW1wZXJhdHVyZUMiLCJ0ZW1wX2MiLCJ0ZW1wZXJhdHVyZUYiLCJ0ZW1wX2YiLCJmZWVsc0xpa2VDIiwiZmVlbHNsaWtlX2MiLCJmZWVsc0xpa2VGIiwiZmVlbHNsaWtlX2YiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmRfa3BoIiwid2luZERpcmVjdGlvbiIsIndpbmRfZGlyIiwidmlzaWJpbGl0eSIsInZpc19rbSIsInByb2Nlc3NEYXRhIiwiRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJHaXBoeUFQSSIsImdldEdpZkJ5SWQiLCJnaWZJZCIsImltYWdlcyIsIm9yaWdpbmFsIiwiVXRpbHMiLCJzd2l0Y2hCYWNrZ3JvdW5kIiwiZmluYWxEYXRhIiwiYmFja2dyb3VuZFVybCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzZXRHaWZJZCIsIlJlbmRlcmVyIiwiZGF0YUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndlYXRoZXJHaWYiLCJyZW5kZXJEYXRhIiwid2VhdGhlckRhdGEiLCJ1c2VDZWxzaXVzVGVtcCIsInVzZUNlbHNpdXNGZWVsc0xpa2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlIiwiaGVhZGluZyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwibG9jYWxUaW1lUGFyYSIsInRpbWUiLCJzcGxpdCIsIndlYXRoZXJJY29uSW1nIiwic3JjIiwiYWx0Iiwid2VhdGhlclBhcmEiLCJ0ZW1wZXJhdHVyZVBhcmEiLCJ0ZW1wZXJhdHVyZVZhbHVlIiwiZmVlbHNMaWtlUGFyYSIsImZlZWxzTGlrZVZhbHVlIiwiaHVtaWRpdHlQYXJhIiwid2luZFNwZWVkUGFyYSIsIndpbmREaXJlY3Rpb25QYXJhIiwidmlzaWJpbGl0eVBhcmEiLCJzZXRHaWYiLCJnaWZVcmwiLCJzZWFyY2hJbnB1dCIsInNlYXJjaEJ1dHRvbiIsInRvZ2dsZUJ1dHRvbiIsImhhbmRsZVNlYXJjaCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImJhY2tncm91bmRJbWFnZVVybCIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRvZ2dsZVRlbXBlcmF0dXJlVW5pdCIsImluaXQiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5Q29kZSIsInNldERlZmF1bHRDaXR5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==